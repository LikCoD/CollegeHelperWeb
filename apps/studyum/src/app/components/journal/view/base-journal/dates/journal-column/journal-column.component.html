<div class="date-block">
  <app-base-journal-date-item
    [lesson]="date"
    (click)="onDateClick()"
  ></app-base-journal-date-item>
  <app-dialog-frame
    *ngIf="selectedDate === date.startDate && editable"
    class="date-popup"
    (close)="selectedDate = null">
    <app-lesson-addition-data
      [lesson]="date"
      [types]="studyPlace.lessonTypes"
    ></app-lesson-addition-data>
  </app-dialog-frame>
</div>
<section>
  <div *ngFor="let lesson of lessons">
    <app-base-journal-cell
      [ngClass]="{focused: isSelected(lesson.point!!)}"
      [entries]="entries(lesson)"
      [color]="lessonColor(lesson)"
      [showPopup]="!isLastSelected(lesson.point!!)"
      (click)="onCellClick(lesson)"
    ></app-base-journal-cell>
    <app-lesson-info
      *ngIf="isLastSelected(lesson.point!!) && !shiftPressed && !controlPressed && !editable && !!lesson.id"
      (close)="clearSelectedPoints()"
      [lesson]="lesson"
    ></app-lesson-info>
    <app-dialog-frame
      *ngIf="isLastSelected(lesson.point!!) && !shiftPressed && !controlPressed && editable"
      (close)="clearSelectedPoints()">
      <app-select-mark
        [lesson]="lesson"
        [marks]="marks"
        [absenceMark]="studyPlace.absenceMark"
        [standaloneMarks]="standaloneMarks"
        [showAllMarks]="true"
        [showStandaloneMarks]="true"
        [showAbsence]="true"
      ></app-select-mark>
    </app-dialog-frame>
  </div>
</section>
