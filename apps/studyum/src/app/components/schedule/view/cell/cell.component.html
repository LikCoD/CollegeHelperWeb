<div class="cell" #root>
  <div class="edit-container" *ngIf="isEditMode">
    <button class="edit-control-button transparent-btn edit-btn" (click)="editLessonDialog()"></button>
    <button class="edit-control-button transparent-btn remove-btn" (click)="removeLessonDialog()"></button>
  </div>
  <ng-container *ngIf="key$ | async as key">
    <section>
      <app-schedule-subject
        *ngFor="let lesson of lessons[selectedSubjectIndex]"
        #subject [lesson]="lesson" [showForeground]="key === 'null'"
      ></app-schedule-subject>
    </section>
    <div class="btn-cell" *ngIf="key === 'null'">
      <button (click)="previousSubject()" class="transparent-btn switchers-btn"></button>
      <button (click)="nextSubject()" class="transparent-btn switchers-btn"></button>
    </div>
  </ng-container>
  <app-more-indicator *ngIf="lessons.length > 1"></app-more-indicator>
</div>

<ng-template #selectSubjectTemplate>
  <app-select-subject-dialog [lessons]="cell.lessons" [multiSelect]="multiSelect"></app-select-subject-dialog>
</ng-template>

<ng-template #manageSubjectTemplate>
  <app-add-subject-dialog
    *ngIf="!!selectedLessons && selectedLessons.length != 0"
    [templateSubject]="selectedLessons[0]"></app-add-subject-dialog>
</ng-template>
