<div class="wrapper">
  <app-schedule-top-bar
    [minScale]="scheduleService.minYScale"
    [maxScale]="scheduleService.maxYScale"
    [preferredMaxScale]="scheduleService.preferredMaxYSScale"
    (editMode)="isEditMode = $event"
    (scale)="scheduleService.scaleY = $event"
  ></app-schedule-top-bar>
  <main *ngIf="schedule$ | async as schedule">
    <app-edit-schedule *ngIf="isEditMode" [schedule]="schedule" (makeGeneral)="makeGeneral()"></app-edit-schedule>
    <div class="schedule-wrapper">
      <div class="schedule-container" [style.height.px]="maxHeight">
        <div class="empty-corner"></div>
        <div class="markup">
          <hr *ngFor="let time of schedule.info.times" [style.margin-top.px]="scheduleService.getTimeY(time)">
        </div>
        <div class="time-container">
          <p *ngFor="let time of schedule.info.times" class="time"
             [style.margin-top.px]="scheduleService.getTimeY(time) - 20">{{time | moment : ('datetime.time' | translate)}}</p>
        </div>
        <div class="weekdays-container">
          <p *ngFor="let i of days" class="weekday">{{weekdays[i % 7]}}</p>
        </div>
        <div class="lessons-container">
          <app-schedule-cell
            *ngFor="let cell of schedule.cells"
            [appScheduleCell]="cell"
            class="cell"
            [cell]="cell"
            [isEditMode]="isEditMode"></app-schedule-cell>
        </div>
      </div>
    </div>
  </main>
</div>

